<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Visualize Stego Data — Image Steganography</title>
  <meta name="description"
    content="Visualize where hidden data is stored in stego JPEG images. See block overlay, message size, and capacity. No password required.">
  <meta name="author" content="Gaurav Subedi">
  <link rel="canonical" th:href="${requestUrl}">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Visualize Stego Data — Image Steganography">
  <meta property="og:description"
    content="Visualize where hidden data is stored in stego images. Block overlay and analysis. No password required.">
  <meta property="og:url" th:content="${requestUrl}">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Visualize Stego Data — Image Steganography">
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&display=swap"
    rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link th:href="@{/css/app.css}" rel="stylesheet">
</head>

<body class="layout-wrapper">
  <div class="layout-main page-container">
    <div class="container" style="max-width: 720px;">
      <div class="page-header">
        <div class="page-nav-actions d-flex align-items-center justify-content-between">
          <a th:href="@{/}" class="btn btn-link btn-sm page-nav-link px-0">&larr; Back</a>
          <a th:href="@{/decode}" class="btn btn-link btn-sm page-nav-link">Decode</a>
        </div>
        <h1 class="page-title mb-1">Visualize Stego Data</h1>
        <p class="page-subtitle">Upload a stego image to see where the hidden message is stored. Each 8×8 block in
          the Cb (chroma) channel can hold 2 bytes. No password required.</p>
      </div>

      <div id="errorArea" class="mb-3"></div>

      <div class="card form-card mb-4">
        <div class="card-body">
          <form id="analyzeForm">
            <div class="mb-4">
              <label for="stegoImage" class="form-label fw-medium">Stego Image</label>
              <input type="file" class="form-control" id="stegoImage" name="stegoImage" accept=".jpg,.jpeg,image/jpeg"
                required>
              <div class="form-text mt-1">JPEG image created by this app.</div>
            </div>
            <button type="submit" id="submitBtn" class="btn btn-primary w-100 py-2">
              <span class="btn-content">Analyze & Visualize</span>
              <span class="btn-loading-content" style="display: none;">
                <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                Analyzing…
              </span>
            </button>
          </form>
        </div>
      </div>

      <div id="results" style="display: none;">
        <div class="card form-card mb-3">
          <div class="card-body">
            <h6 class="fw-semibold mb-3">Analysis</h6>
            <div class="row g-2 small">
              <div class="col-6 col-md-3">
                <span class="text-muted">Image</span><br>
                <span id="statDimensions">—</span>
              </div>
              <div class="col-6 col-md-3">
                <span class="text-muted">Message size</span><br>
                <span id="statMessageLen">—</span>
              </div>
              <div class="col-6 col-md-3">
                <span class="text-muted">Blocks used</span><br>
                <span id="statUsedMcus">—</span>
              </div>
              <div class="col-6 col-md-3">
                <span class="text-muted">Capacity</span><br>
                <span id="statCapacity">—</span>
              </div>
            </div>
            <div class="mt-2 small">
              <span class="text-muted">Password protected:</span>
              <span id="statPassword">—</span>
            </div>
          </div>
        </div>

        <div class="card form-card">
          <div class="card-body">
            <h6 class="fw-semibold mb-3">Block overlay</h6>
            <p class="text-muted small mb-3">
              <span class="d-inline-block rounded px-2 py-1 me-2"
                style="background: rgba(13, 110, 253, 0.4);">Embedded</span>
              <span class="d-inline-block rounded px-2 py-1 me-3" style="background: rgba(0,0,0,0.05);">Unused</span>
            </p>
            <div id="previewWrapper" class="viz-preview-wrapper border rounded overflow-hidden" style="display: none;">
              <canvas id="previewCanvas"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="layout-footer">
    <div class="container text-center">
      © 2025 Gaurav Subedi. All rights reserved. Use requires permission.
    </div>
  </footer>

  <script th:src="@{/js/visualize.js}"></script>
</body>

</html>